### FrameWork Used: *Serverless*
### Service Provider: *Amazon Web Services (AWS)*

## Setup 
____
#### For setting up the development environment, please follow the provided steps. 

### Steps:
* Clone the repository.
* change your working  directory
    >   `cd <PROJECT_NAME>`
* install aws-cli globally using npm/apt/python packages (#Optional) 
    #### apt package
    > `sudo apt-get install awscli`

    #### Use python package
    **Pre-requirements**
    *  Python should be installed on your system
    *  Pip should be installed.
        > `pip install awscli `
    *   if you have Python version 3+ installed, recommended
        > `pip3 install awscli `

    #### Windows:
    Download the executable file from the following link and run the file to install AWS-CLI:  
    [Go to official download page](https://docs.aws.amazon.com/cli/latest/userguide/install-windows.html)      
    ##### Note: you may need to add path of the installed program to the environment variable 
    
* install all the dependencies by installing node_modules and dependent packages
    > `npm install`
* install serverless globally
    > `npm install serverless -g`
* Now configure the aws account to which resources need to be deployed
    ### Pre-conditions
    -   You should have an active aws account.
    -   You have access key and secret key that are generated by using IAM service.
    ### Steps:
    Configure using one of the following options.
    1. Using aws cli 
        >   `aws configure`

        Please provide the valid inputs
        1. access key 
        2. secret key
        3. region (by default-> `us-east-2`) Choose-> `ap-south-1` for `Mumbai,India`
        4. type-> json
    2. Using serverless
        > `serverless config credentials --provider aws --accesskey <ACCESS_KEY> --secretkey <SECRET_KEY>`
        *sls -> alias of serverless*
        You can use any of the "serverless" or "sls" while using command
*   To create the development setup for AWS (##No need to for this project as it is already done)
    > `sls create --template aws-nodejs --name [projectName]` 



* To use typescript inplace of default javascript, follow these steps.
    * Install serverless plugin to create and support offline invocation of functions defined in ts
        > `npm i -D serverless-plugin-typescript typescript`
    * Install types for node and aws-lambda
        > `npm i @types/node -D`
        > `npm i @types/aws-lambda -D`
    * Now create typescript configuration
        > `tsc --init`  
      * It will create `tsconfig.json` file in the root directory
        ##### Note: Don't modify outDir and baseDir property in tsconfig.json, else above plugin may not work properly.

____
## Important infomation regarding AWS services
### Cognito
#### Hard Limits
* Access token Id expiration time - *1Hr*
* Refresh token expiration time- can be configured between *1 day* to *10 years*.
* For more details
    * [cognito limits documentation](https://docs.aws.amazon.com/cognito/latest/developerguide/limits.html) 

### Lambda
#### Hard Limits
* Invocation payload - *6 MB*
* Max timeout - *15 minutes*
* Environment variables - *4 KB*
* Deployment Package Size - *50 MB* <sup><sub>(zipped)</sub></sup>
* For more details
    * [Lambda limits documentation](https://docs.aws.amazon.com/lambda/latest/dg/limits.html) 

### API Gateway
#### Hard Limits
* Integration time out - *29 Sec*
* Payload Size - *10 MB*

### SNS
#### SMS is not supported in Mumbai(ap-south-1), Virginia(us-east-1) is supported o Jan 28 2020
##### Sender Id is must as trai (so they are sending as XX-NOTICE), To change it follow below procedure


###### cognito is sending otp to email/mobile , that has expiry time of 24 hours.
